import{t as le,X as J,_ as Y,ah as _e,ai as ge,E as D,A as Ce,B as Ne,z as Te,$ as Pe,e as se,v as we,aj as ne}from"./constants-BbhSUWfP.js";import{b as I,d as Z,u as K,_ as re,w as Ee,a as Se}from"./base-D0W_z4C0.js";import{c as A}from"./el-select-D2Kip8AO.js";import{S as $e,a7 as xe,d as M,i as ee,a as w,w as L,m as te,b as Be,g as ie,q as ce,x as ue,u as z,D as Oe,z as ae,c as V,o as de,a9 as ke,k as d,p as Re,r as G,W as ze,Q as Ae,E as Fe,aa as Le,P as Me,U as Ve,y as De}from"./index-BxSgbHR9.js";import{E as U}from"./aria-BUADUvnR.js";import{U as be}from"./index-BSl0X_TB.js";import{f as Ue}from"./vnode-CU6LxloI.js";const Ie=(e,o,b)=>Ue(e.subTree).filter(s=>{var u;return xe(s)&&((u=s.type)==null?void 0:u.name)===o&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ke=(e,o)=>{const b={},v=$e([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=Ie(e,o,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},W=Symbol("tabsRootContextKey"),We=I({tabs:{type:Z(Array),default:()=>le([])}}),ve="ElTabBar",qe=M({name:ve}),je=M({...qe,props:We,setup(e,{expose:o}){const b=e,v=ae(),t=ee(W);t||J(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=K("tabs"),u=w(),f=w(),h=()=>{let l=0,y=0;const p=["top","bottom"].includes(t.props.tabPosition)?"width":"height",R=p==="width"?"x":"y",n=R==="x"?"left":"top";return b.tabs.every($=>{var x,B;const E=(B=(x=v.parent)==null?void 0:x.refs)==null?void 0:B[`tab-${$.uid}`];if(!E)return!1;if(!$.active)return!0;l=E[`offset${A(n)}`],y=E[`client${A(p)}`];const O=window.getComputedStyle(E);return p==="width"&&(y-=Number.parseFloat(O.paddingLeft)+Number.parseFloat(O.paddingRight),l+=Number.parseFloat(O.paddingLeft)),!1}),{[p]:`${y}px`,transform:`translate${A(R)}(${l}px)`}},N=()=>f.value=h(),g=[],i=()=>{var l;g.forEach(p=>p.stop()),g.length=0;const y=(l=v.parent)==null?void 0:l.refs;if(y){for(const p in y)if(p.startsWith("tab-")){const R=y[p];R&&g.push(Y(R,N))}}};L(()=>b.tabs,async()=>{await te(),N(),i()},{immediate:!0});const m=Y(u,()=>N());return Be(()=>{g.forEach(l=>l.stop()),g.length=0,m.stop()}),o({ref:u,update:N}),(l,y)=>(ie(),ce("div",{ref_key:"barRef",ref:u,class:ue([z(s).e("active-bar"),z(s).is(z(t).props.tabPosition)]),style:Oe(f.value)},null,6))}});var He=re(je,[["__file","tab-bar.vue"]]);const Xe=I({panes:{type:Z(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Qe={tabClick:(e,o,b)=>b instanceof Event,tabRemove:(e,o)=>o instanceof Event},oe="ElTabNav",Ye=M({name:oe,props:Xe,emits:Qe,setup(e,{expose:o,emit:b}){const v=ee(W);v||J(oe,"<el-tabs><tab-nav /></el-tabs>");const t=K("tabs"),s=_e(),u=ge(),f=w(),h=w(),N=w(),g=w(),i=w(!1),m=w(0),l=w(!1),y=w(!0),p=V(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),R=V(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${m.value}px)`})),n=()=>{if(!f.value)return;const r=f.value[`offset${A(p.value)}`],c=m.value;if(!c)return;const a=c>r?c-r:0;m.value=a},$=()=>{if(!f.value||!h.value)return;const r=h.value[`offset${A(p.value)}`],c=f.value[`offset${A(p.value)}`],a=m.value;if(r-a<=c)return;const T=r-a>c*2?a+c:r-c;m.value=T},x=async()=>{const r=h.value;if(!i.value||!N.value||!f.value||!r)return;await te();const c=N.value.querySelector(".is-active");if(!c)return;const a=f.value,T=["top","bottom"].includes(v.props.tabPosition),P=c.getBoundingClientRect(),C=a.getBoundingClientRect(),k=T?r.offsetWidth-C.width:r.offsetHeight-C.height,S=m.value;let _=S;T?(P.left<C.left&&(_=S-(C.left-P.left)),P.right>C.right&&(_=S+P.right-C.right)):(P.top<C.top&&(_=S-(C.top-P.top)),P.bottom>C.bottom&&(_=S+(P.bottom-C.bottom))),_=Math.max(_,0),m.value=Math.min(_,k)},B=()=>{var r;if(!h.value||!f.value)return;e.stretch&&((r=g.value)==null||r.update());const c=h.value[`offset${A(p.value)}`],a=f.value[`offset${A(p.value)}`],T=m.value;a<c?(i.value=i.value||{},i.value.prev=T,i.value.next=T+a<c,c-T<a&&(m.value=c-a)):(i.value=!1,T>0&&(m.value=0))},E=r=>{const c=r.code,{up:a,down:T,left:P,right:C}=U;if(![a,T,P,C].includes(c))return;const k=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),S=k.indexOf(r.target);let _;c===P||c===a?S===0?_=k.length-1:_=S-1:S<k.length-1?_=S+1:_=0,k[_].focus({preventScroll:!0}),k[_].click(),O()},O=()=>{y.value&&(l.value=!0)},q=()=>l.value=!1;return L(s,r=>{r==="hidden"?y.value=!1:r==="visible"&&setTimeout(()=>y.value=!0,50)}),L(u,r=>{r?setTimeout(()=>y.value=!0,50):y.value=!1}),Y(N,B),de(()=>setTimeout(()=>x(),0)),ke(()=>B()),o({scrollToActiveTab:x,removeFocus:q}),()=>{const r=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(D,null,{default:()=>[d(Ce,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:$},[d(D,null,{default:()=>[d(Ne,null,null)]})])]:null,c=e.panes.map((a,T)=>{var P,C,k,S;const _=a.uid,j=a.props.disabled,H=(C=(P=a.props.name)!=null?P:a.index)!=null?C:`${T}`,X=!j&&(a.isClosable||e.editable);a.index=`${T}`;const pe=X?d(D,{class:"is-icon-close",onClick:F=>b("tabRemove",a,F)},{default:()=>[d(Te,null,null)]}):null,he=((S=(k=a.slots).label)==null?void 0:S.call(k))||a.props.label,ye=!j&&a.active?0:-1;return d("div",{ref:`tab-${_}`,class:[t.e("item"),t.is(v.props.tabPosition),t.is("active",a.active),t.is("disabled",j),t.is("closable",X),t.is("focus",l.value)],id:`tab-${H}`,key:`tab-${_}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>O(),onBlur:()=>q(),onClick:F=>{q(),b("tabClick",a,H,F)},onKeydown:F=>{X&&(F.code===U.delete||F.code===U.backspace)&&b("tabRemove",a,F)}},[he,pe])});return d("div",{ref:N,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(v.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:f},[d("div",{class:[t.e("nav"),t.is(v.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:h,style:R.value,role:"tablist",onKeydown:E},[e.type?null:d(He,{ref:g,tabs:[...e.panes]},null),c])])])}}}),Ge=I({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Z(Function),default:()=>!0},stretch:Boolean}),Q=e=>ze(e)||we(e),Je={[be]:e=>Q(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>Q(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>Q(e),tabAdd:()=>!0},Ze=M({name:"ElTabs",props:Ge,emits:Je,setup(e,{emit:o,slots:b,expose:v}){var t;const s=K("tabs"),u=V(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:h,removeChild:N}=Ke(ae(),"ElTabPane"),g=w(),i=w((t=e.modelValue)!=null?t:"0"),m=async(n,$=!1)=>{var x,B,E;if(!(i.value===n||se(n)))try{await((x=e.beforeLeave)==null?void 0:x.call(e,n,i.value))!==!1&&(i.value=n,$&&(o(be,n),o("tabChange",n)),(E=(B=g.value)==null?void 0:B.removeFocus)==null||E.call(B))}catch{}},l=(n,$,x)=>{n.props.disabled||(m($,!0),o("tabClick",n,x))},y=(n,$)=>{n.props.disabled||se(n.props.name)||($.stopPropagation(),o("edit",n.props.name,"remove"),o("tabRemove",n.props.name))},p=()=>{o("edit",void 0,"add"),o("tabAdd")};L(()=>e.modelValue,n=>m(n)),L(i,async()=>{var n;await te(),(n=g.value)==null||n.scrollToActiveTab()}),Re(W,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:h,unregisterPane:N}),v({currentName:i});const R=({render:n})=>n();return()=>{const n=b["add-icon"],$=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:p,onKeydown:E=>{E.code===U.enter&&p()}},[n?G(b,"add-icon"):d(D,{class:s.is("icon-plus")},{default:()=>[d(Pe,null,null)]})]):null,x=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(R,{render:()=>{const E=f.value.some(O=>O.slots.label);return d(Ye,{ref:g,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:l,onTabRemove:y},{$stable:!E})}},null),$]),B=d("div",{class:s.e("content")},[G(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[B,x])}}}),et=I({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",tt=M({name:fe}),at=M({...tt,props:et,setup(e){const o=e,b=ae(),v=Ae(),t=ee(W);t||J(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=K("tab-pane"),u=w(),f=V(()=>o.closable||t.props.closable),h=ne(()=>{var l;return t.currentName.value===((l=o.name)!=null?l:u.value)}),N=w(h.value),g=V(()=>{var l;return(l=o.name)!=null?l:u.value}),i=ne(()=>!o.lazy||N.value||h.value);L(h,l=>{l&&(N.value=!0)});const m=Fe({uid:b.uid,slots:v,props:o,paneName:g,active:h,index:u,isClosable:f});return t.registerPane(m),de(()=>{t.sortPane(m)}),Le(()=>{t.unregisterPane(m.uid)}),(l,y)=>z(i)?Me((ie(),ce("div",{key:0,id:`pane-${z(g)}`,class:ue(z(s).b()),role:"tabpanel","aria-hidden":!z(h),"aria-labelledby":`tab-${z(g)}`},[G(l.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ve,z(h)]]):De("v-if",!0)}});var me=re(at,[["__file","tab-pane.vue"]]);const ut=Ee(Ze,{TabPane:me}),dt=Se(me);export{dt as E,ut as a};
