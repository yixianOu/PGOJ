import{c as C,X as I,p as D,W as x,aT as N,U,V as $}from"./constants-BbhSUWfP.js";import{o as A,Y as V,b as j,ac as F,c as K,w as q,ap as G,a1 as y,d as J,k as Q,r as k,L as Z}from"./index-BxSgbHR9.js";import{u as Y,b as _,d as L}from"./base-D0W_z4C0.js";import{a as R}from"./scroll-Kwgiw4mU.js";import{P as h}from"./vnode-CU6LxloI.js";const de=(e,t,n,s)=>{let a={offsetX:0,offsetY:0};const c=i=>{const f=i.clientX,T=i.clientY,{offsetX:v,offsetY:p}=a,d=e.value.getBoundingClientRect(),b=d.left,w=d.top,S=d.width,O=d.height,P=document.documentElement.clientWidth,X=document.documentElement.clientHeight,B=-b+v,H=-w+p,W=P-b-S+v,z=X-w-O+p,M=E=>{let r=v+E.clientX-f,m=p+E.clientY-T;s!=null&&s.value||(r=Math.min(Math.max(r,B),W),m=Math.min(Math.max(m,H),z)),a={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${C(r)}, ${C(m)})`)},g=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",g)},o=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",c)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",c)},l=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return A(()=>{V(()=>{n.value?o():u()})}),j(()=>{u()}),{resetPosition:l}},re=(e,t={})=>{F(e)||I("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||Y("popup"),s=K(()=>n.bm("parent","hidden"));if(!D||x(document.body,s.value))return;let a=0,c=!1,o="0";const u=()=>{setTimeout(()=>{typeof document>"u"||($(document==null?void 0:document.body,s.value),c&&document&&(document.body.style.width=o))},200)};q(e,l=>{if(!l){u();return}c=!x(document.body,s.value),c&&(o=document.body.style.width),a=R(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=N(document.body,"overflowY");a>0&&(i||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`),U(document.body,s.value)}),G(()=>u())},ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let t=!1,n=!1;return{onClick:o=>{t&&n&&e(o),t=n=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},oe=_({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),te={click:e=>e instanceof MouseEvent},ne="overlay";var se=J({name:"ElOverlay",props:oe,emits:te,setup(e,{slots:t,emit:n}){const s=Y(ne),a=l=>{n("click",l)},{onClick:c,onMousedown:o,onMouseup:u}=ee(e.customMaskEvent?void 0:a);return()=>e.mask?Q("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:o,onMouseup:u},[k(t,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):Z("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(t,"default")])}});const me=se;export{me as E,re as a,ee as b,de as u};
