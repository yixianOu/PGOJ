import"./base-D0W_z4C0.js";import{a as E,E as x}from"./el-form-item-DJ5B80l7.js";import{E as y}from"./el-input-B9UNxcP1.js";import{_ as V,E as b,a as k,q as B,A as r,k as o,j as t,C,I,g as N,u as _,H as p,G as q,f as F}from"./index-BxSgbHR9.js";import{m as K,l as L}from"./constants-BbhSUWfP.js";import{l as M}from"./login-DmyFmSrL.js";import{E as c}from"./request-Doo85ERT.js";import{E as S}from"./index-BSl0X_TB.js";import"./_baseClone-C9TxUIFe.js";import"./index-r5W6hzzQ.js";import"./userinfo-DyPuNU-m.js";import"./userinfo-CQJB7s17.js";import"./aria-BUADUvnR.js";const T={class:"login"},U={class:"login-box"},h={class:"btn"},j={class:"link"},A={__name:"Login",setup(G){const f={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确邮箱",trigger:"blur"}]},s=b({email:"",password:""}),n=k(!1),g=q(),i=async()=>{var e;n.value=!0;const l=await M(s);if(l){const a=(e=l==null?void 0:l.user_info)==null?void 0:e.role_level;a&&a===2?(c({message:"登陆成功",type:"success",plain:!0}),await g.push("/admin")):c({message:"登陆失败, 非管理员用户",type:"error",plain:!0})}n.value=!1};return(l,e)=>{const a=S,u=x,v=y,d=F("router-link"),w=E;return N(),B("div",T,[r("div",U,[e[5]||(e[5]=r("div",{class:"logo"},[r("span",null,"登录")],-1)),o(w,{onSubmit:C(i,["prevent"]),onKeyup:I(i,["enter"]),model:s,rules:f},{default:t(()=>[o(u,{prop:"email"},{default:t(()=>[o(a,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=m=>s.email=m),class:"input",placeholder:"邮箱","prefix-icon":_(K)},null,8,["modelValue","prefix-icon"])]),_:1}),o(u,{prop:"password"},{default:t(()=>[o(a,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=m=>s.password=m),class:"input",placeholder:"密码","prefix-icon":_(L),type:"password","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),r("div",h,[o(v,{onClick:i,type:"success",class:"btn_item",loading:n.value},{default:t(()=>e[2]||(e[2]=[p("登录")])),_:1},8,["loading"])]),r("div",j,[o(d,{to:"/admin/register"},{default:t(()=>e[3]||(e[3]=[p("注册账号")])),_:1}),o(d,{to:"/admin/login_code"},{default:t(()=>e[4]||(e[4]=[p("验证码登录")])),_:1})])]),_:1},8,["model"])])])}}},ee=V(A,[["__scopeId","data-v-72253722"]]);export{ee as default};
