import{d as V,a as Z,c as g,o as G,g as m,h as b,j as k,P as M,A as C,x as v,u as a,D as x,B as J,y as N,J as H,r as K,q as P,F as Y,U as z,C as Q,k as O,T as R,a7 as w,W as X,a8 as A}from"./index-BxSgbHR9.js";import{i as ee,ag as D,u as te,E as F,a7 as oe,Y as ne,p as se,H as $}from"./constants-BbhSUWfP.js";import{b as ie,d as I,_ as ae,e as le}from"./base-D0W_z4C0.js";import{a as re}from"./el-input-B9UNxcP1.js";import{E as _}from"./aria-BUADUvnR.js";const j=["success","info","warning","error"],ce=ie({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:ee},id:{type:String,default:""},message:{type:I([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:I(Function),default:()=>{}},onClose:{type:I(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...j,""],default:""},zIndex:Number}),ue={destroy:()=>!0},fe=V({name:"ElNotification"}),pe=V({...fe,props:ce,emits:ue,setup(t,{expose:s}){const o=t,{ns:n,zIndex:r}=re("notification"),{nextZIndex:f,currentZIndex:p}=r,{Close:c}=oe,l=Z(!1);let i;const u=g(()=>{const e=o.type;return e&&D[o.type]?n.m(e):""}),d=g(()=>o.type&&D[o.type]||o.icon),T=g(()=>o.position.endsWith("right")?"right":"left"),q=g(()=>o.position.startsWith("top")?"top":"bottom"),U=g(()=>{var e;return{[q.value]:`${o.offset}px`,zIndex:(e=o.zIndex)!=null?e:p.value}});function S(){o.duration>0&&({stop:i}=ne(()=>{l.value&&h()},o.duration))}function L(){i==null||i()}function h(){l.value=!1}function W({code:e}){e===_.delete||e===_.backspace?L():e===_.esc?l.value&&h():S()}return G(()=>{S(),f(),l.value=!0}),te(document,"keydown",W),s({visible:l,close:h}),(e,ge)=>(m(),b(R,{name:a(n).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:Ce=>e.$emit("destroy"),persisted:""},{default:k(()=>[M(C("div",{id:e.id,class:v([a(n).b(),e.customClass,a(T)]),style:x(a(U)),role:"alert",onMouseenter:L,onMouseleave:S,onClick:e.onClick},[a(d)?(m(),b(a(F),{key:0,class:v([a(n).e("icon"),a(u)])},{default:k(()=>[(m(),b(J(a(d))))]),_:1},8,["class"])):N("v-if",!0),C("div",{class:v(a(n).e("group"))},[C("h2",{class:v(a(n).e("title")),textContent:H(e.title)},null,10,["textContent"]),M(C("div",{class:v(a(n).e("content")),style:x(e.title?void 0:{margin:0})},[K(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),P(Y,{key:1},[N(" Caution here, message could've been compromised, never use user's input as message "),C("p",{innerHTML:e.message},null,8,["innerHTML"])],2112)):(m(),P("p",{key:0},H(e.message),1))])],6),[[z,e.message]]),e.showClose?(m(),b(a(F),{key:0,class:v(a(n).e("closeBtn")),onClick:Q(h,["stop"])},{default:k(()=>[O(a(c))]),_:1},8,["class","onClick"])):N("v-if",!0)],2)],46,["id","onClick"]),[[z,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var de=ae(pe,[["__file","notification.vue"]]);const E={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},B=16;let me=1;const y=function(t={},s=null){if(!se)return{close:()=>{}};(typeof t=="string"||w(t))&&(t={message:t});const o=t.position||"top-right";let n=t.offset||0;E[o].forEach(({vm:u})=>{var d;n+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+B}),n+=B;const r=`notification_${me++}`,f=t.onClose,p={...t,offset:n,id:r,onClose:()=>{ve(r,o,f)}};let c=document.body;$(t.appendTo)?c=t.appendTo:X(t.appendTo)&&(c=document.querySelector(t.appendTo)),$(c)||(c=document.body);const l=document.createElement("div"),i=O(de,p,w(p.message)?{default:()=>p.message}:null);return i.appContext=s??y._context,i.props.onDestroy=()=>{A(null,l)},A(i,l),E[o].push({vm:i}),c.appendChild(l.firstElementChild),{close:()=>{i.component.exposed.visible.value=!1}}};j.forEach(t=>{y[t]=(s={})=>((typeof s=="string"||w(s))&&(s={message:s}),y({...s,type:t}))});function ve(t,s,o){const n=E[s],r=n.findIndex(({vm:i})=>{var u;return((u=i.component)==null?void 0:u.props.id)===t});if(r===-1)return;const{vm:f}=n[r];if(!f)return;o==null||o(f);const p=f.el.offsetHeight,c=s.split("-")[0];n.splice(r,1);const l=n.length;if(!(l<1))for(let i=r;i<l;i++){const{el:u,component:d}=n[i].vm,T=Number.parseInt(u.style[c],10)-p-B;d.props.offset=T}}function ye(){for(const t of Object.values(E))t.forEach(({vm:s})=>{s.component.exposed.visible.value=!1})}y.closeAll=ye;y._context=null;const ke=le(y,"$notify");export{ke as E};
